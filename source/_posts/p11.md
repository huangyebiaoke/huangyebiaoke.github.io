---
uuid: 1e0b8576-b1a0-46e2-f4d2-f5b9b1ab52c0
title: CMD批处理命令的强大
date: 2018-04-28 07:52:38
tags:
  - CMD
  - DOS
  - .bat
---
### 背景
	前几天我用quickbms批量提取韩游天命之子（destiny_child）的pck文件，提取出来的是一个一个文件夹：
![p11-1](/assets/blogimg/p11-1.png "p11-1")
	每个文件夹里是这样的文件：
![p11-2](/assets/blogimg/p11-2.png "p11-2")
现在我需要：
1. 将每个子文件夹里以.dat为后缀的文件批量改成.exp.json为后缀;将每个子文件夹里以.txt为后缀的文件批量改成.mtn为后缀.
2. 在每个子文件夹里建立3个文件夹：expressions，montions，textures.
3. 将每个子文件夹里.exp.json为后缀的文件放入expressions文件夹，以.mtn为后缀的文件放入montions文件夹，以png为后缀的文件放入textures文件夹.
### 思考
	毫无疑问，在图形界面面对200多个子文件夹做复制粘贴的重复工作不仅枯燥而且效率低下。那么有没有更快捷的方法呢？答案是有，下面有请cmd批处理命令！！！！
### 步骤
1. 对于我们以上提出的第一个`for /r %i in (*.txt) do ren "%i" *.mtn`命令是行之有效的。他的作用是遍历output这个主文件夹下的所有子文件夹，并且把.txt后缀改为.mtn。%i这个变量代表.txt,就是不断在每个子目录下运行`ren *.txt *.mtn`这个命令。
2. 对于第二个我们可以用`for /d %i in (*) do md "%~fsi\expressions" "%~fsi\motions" %~fsi\textures" `这个命令来完成。意思就是不断在每个子目录下运行`md "\expressions" "\motions" "\textures"`这个命令。
3. 对于第三个`for /d %i in (*) do move "%~fsi\*.exp.json" "%~fsi\expressions"`意思大同小异。
然后我们看看效果：
![p11-3](/assets/blogimg/p11-3.png "p11-3")
### 题外话
- 小彩蛋：
![p11-4](/assets/blogimg/p11-4.gif "p11-4")
- 参考：
1. [【教程】提取韩游【天命之子】的人物模型](https://tieba.baidu.com/p/5218112440 "【教程】提取韩游【天命之子】的人物模型")
2. [天命之子 live2d打包教程](https://tieba.baidu.com/p/5260198912?share=9105&fr=share&see_lz=1 "天命之子 live2d打包教程")
3. [给博客添加能动的看板娘(Live2D)](https://imjad.cn/archives/lab/add-dynamic-poster-girl-with-live2d-to-your-blog-02 "给博客添加能动的看板娘(Live2D)")
4. [24小时快速建模[Live2D Cubism 2.0 closed beta]报告](https://tieba.baidu.com/p/3192612677?pn=1 "24小时快速建模[Live2D Cubism 2.0 closed beta]报告")
- demo click [here](http://www.madeai.cn/live2d/ "demo")
