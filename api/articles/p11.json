{"title":"CMD批处理命令的强大","slug":"p11","date":"2018-04-27T23:52:38.000Z","updated":"2020-08-31T21:47:08.695Z","comments":true,"path":"api/articles/p11.json","excerpt":null,"covers":["/assets/blogimg/p11-1.png","/assets/blogimg/p11-3.png","/assets/blogimg/p11-4.gif"],"content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><h3 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h3><pre><code>前几天我用quickbms批量提取韩游天命之子（destiny_child）的pck文件，提取出来的是一个一个文件夹：</code></pre>\n<p><img src=\"/assets/blogimg/p11-1.png\" alt=\"p11-1\" title=\"p11-1\"><br>    每个文件夹里是这样的文件：<br><img src=\"/assets/blogimg/p11-2.png\" alt=\"p11-2\" title=\"p11-2\"><br>现在我需要：</p>\n<ol>\n<li>将每个子文件夹里以.dat为后缀的文件批量改成.exp.json为后缀;将每个子文件夹里以.txt为后缀的文件批量改成.mtn为后缀.</li>\n<li>在每个子文件夹里建立3个文件夹：expressions，montions，textures.</li>\n<li>将每个子文件夹里.exp.json为后缀的文件放入expressions文件夹，以.mtn为后缀的文件放入montions文件夹，以png为后缀的文件放入textures文件夹.<h3 id=\"思考\"><a href=\"#思考\" class=\"headerlink\" title=\"思考\"></a>思考</h3> 毫无疑问，在图形界面面对200多个子文件夹做复制粘贴的重复工作不仅枯燥而且效率低下。那么有没有更快捷的方法呢？答案是有，下面有请cmd批处理命令！！！！<h3 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h3></li>\n<li>对于我们以上提出的第一个<code>for /r %i in (*.txt) do ren &quot;%i&quot; *.mtn</code>命令是行之有效的。他的作用是遍历output这个主文件夹下的所有子文件夹，并且把.txt后缀改为.mtn。%i这个变量代表.txt,就是不断在每个子目录下运行<code>ren *.txt *.mtn</code>这个命令。</li>\n<li>对于第二个我们可以用<code>for /d %i in (*) do md &quot;%~fsi\\expressions&quot; &quot;%~fsi\\motions&quot; %~fsi\\textures&quot; </code>这个命令来完成。意思就是不断在每个子目录下运行<code>md &quot;\\expressions&quot; &quot;\\motions&quot; &quot;\\textures&quot;</code>这个命令。</li>\n<li>对于第三个<code>for /d %i in (*) do move &quot;%~fsi\\*.exp.json&quot; &quot;%~fsi\\expressions&quot;</code>意思大同小异。<br>然后我们看看效果：<br><img src=\"/assets/blogimg/p11-3.png\" alt=\"p11-3\" title=\"p11-3\"><h3 id=\"题外话\"><a href=\"#题外话\" class=\"headerlink\" title=\"题外话\"></a>题外话</h3></li>\n</ol>\n<ul>\n<li>小彩蛋：<br><img src=\"/assets/blogimg/p11-4.gif\" alt=\"p11-4\" title=\"p11-4\"></li>\n<li>参考：</li>\n</ul>\n<ol>\n<li><a href=\"https://tieba.baidu.com/p/5218112440\" title=\"【教程】提取韩游【天命之子】的人物模型\" target=\"_blank\" rel=\"noopener\">【教程】提取韩游【天命之子】的人物模型</a></li>\n<li><a href=\"https://tieba.baidu.com/p/5260198912?share=9105&fr=share&see_lz=1\" title=\"天命之子 live2d打包教程\" target=\"_blank\" rel=\"noopener\">天命之子 live2d打包教程</a></li>\n<li><a href=\"https://imjad.cn/archives/lab/add-dynamic-poster-girl-with-live2d-to-your-blog-02\" title=\"给博客添加能动的看板娘(Live2D)\" target=\"_blank\" rel=\"noopener\">给博客添加能动的看板娘(Live2D)</a></li>\n<li><a href=\"https://tieba.baidu.com/p/3192612677?pn=1\" title=\"24小时快速建模[Live2D Cubism 2.0 closed beta]报告\" target=\"_blank\" rel=\"noopener\">24小时快速建模[Live2D Cubism 2.0 closed beta]报告</a></li>\n</ol>\n<ul>\n<li>demo click <a href=\"http://www.madeai.cn/live2d/\" title=\"demo\" target=\"_blank\" rel=\"noopener\">here</a></li>\n</ul>\n","more":"<h3 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h3><pre><code>前几天我用quickbms批量提取韩游天命之子（destiny_child）的pck文件，提取出来的是一个一个文件夹：</code></pre>\n<p><img src=\"/assets/blogimg/p11-1.png\" alt=\"p11-1\" title=\"p11-1\"><br>    每个文件夹里是这样的文件：<br><img src=\"/assets/blogimg/p11-2.png\" alt=\"p11-2\" title=\"p11-2\"><br>现在我需要：</p>\n<ol>\n<li>将每个子文件夹里以.dat为后缀的文件批量改成.exp.json为后缀;将每个子文件夹里以.txt为后缀的文件批量改成.mtn为后缀.</li>\n<li>在每个子文件夹里建立3个文件夹：expressions，montions，textures.</li>\n<li>将每个子文件夹里.exp.json为后缀的文件放入expressions文件夹，以.mtn为后缀的文件放入montions文件夹，以png为后缀的文件放入textures文件夹.<h3 id=\"思考\"><a href=\"#思考\" class=\"headerlink\" title=\"思考\"></a>思考</h3> 毫无疑问，在图形界面面对200多个子文件夹做复制粘贴的重复工作不仅枯燥而且效率低下。那么有没有更快捷的方法呢？答案是有，下面有请cmd批处理命令！！！！<h3 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h3></li>\n<li>对于我们以上提出的第一个<code>for /r %i in (*.txt) do ren &quot;%i&quot; *.mtn</code>命令是行之有效的。他的作用是遍历output这个主文件夹下的所有子文件夹，并且把.txt后缀改为.mtn。%i这个变量代表.txt,就是不断在每个子目录下运行<code>ren *.txt *.mtn</code>这个命令。</li>\n<li>对于第二个我们可以用<code>for /d %i in (*) do md &quot;%~fsi\\expressions&quot; &quot;%~fsi\\motions&quot; %~fsi\\textures&quot; </code>这个命令来完成。意思就是不断在每个子目录下运行<code>md &quot;\\expressions&quot; &quot;\\motions&quot; &quot;\\textures&quot;</code>这个命令。</li>\n<li>对于第三个<code>for /d %i in (*) do move &quot;%~fsi\\*.exp.json&quot; &quot;%~fsi\\expressions&quot;</code>意思大同小异。<br>然后我们看看效果：<br><img src=\"/assets/blogimg/p11-3.png\" alt=\"p11-3\" title=\"p11-3\"><h3 id=\"题外话\"><a href=\"#题外话\" class=\"headerlink\" title=\"题外话\"></a>题外话</h3></li>\n</ol>\n<ul>\n<li>小彩蛋：<br><img src=\"/assets/blogimg/p11-4.gif\" alt=\"p11-4\" title=\"p11-4\"></li>\n<li>参考：</li>\n</ul>\n<ol>\n<li><a href=\"https://tieba.baidu.com/p/5218112440\" title=\"【教程】提取韩游【天命之子】的人物模型\" target=\"_blank\" rel=\"noopener\">【教程】提取韩游【天命之子】的人物模型</a></li>\n<li><a href=\"https://tieba.baidu.com/p/5260198912?share=9105&fr=share&see_lz=1\" title=\"天命之子 live2d打包教程\" target=\"_blank\" rel=\"noopener\">天命之子 live2d打包教程</a></li>\n<li><a href=\"https://imjad.cn/archives/lab/add-dynamic-poster-girl-with-live2d-to-your-blog-02\" title=\"给博客添加能动的看板娘(Live2D)\" target=\"_blank\" rel=\"noopener\">给博客添加能动的看板娘(Live2D)</a></li>\n<li><a href=\"https://tieba.baidu.com/p/3192612677?pn=1\" title=\"24小时快速建模[Live2D Cubism 2.0 closed beta]报告\" target=\"_blank\" rel=\"noopener\">24小时快速建模[Live2D Cubism 2.0 closed beta]报告</a></li>\n</ol>\n<ul>\n<li>demo click <a href=\"http://www.madeai.cn/live2d/\" title=\"demo\" target=\"_blank\" rel=\"noopener\">here</a></li>\n</ul>\n","categories":[],"tags":[{"name":"DOS","path":"api/tags/DOS.json"},{"name":"CMD","path":"api/tags/CMD.json"},{"name":".bat","path":"api/tags/.bat.json"}]}