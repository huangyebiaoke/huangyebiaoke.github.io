{"title":"跳跳球","slug":"mark-ball-game","date":"2017-10-06T08:12:38.000Z","updated":"2020-08-31T21:45:42.974Z","comments":true,"path":"api/articles/mark-ball-game.json","excerpt":null,"covers":["/assets/blogimg/item_game_tiaotiaoball_ball.png"],"content":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><p>这些天没什么事读了《HTML5游戏开发》这本书，做一下实例：<br><img src=\"/assets/blogimg/item_game_tiaotiaoball_ball.png\"><br>1.<a href=\"/item/game/tiaotiaoball/settime\">计时器：</a></p>\n<pre><code class=\"bash\">&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;!--解决中文乱码的问题--&gt;\n    &lt;script&gt;\n        function init() {\n            setInterval(&quot;document.f.display.value=String(Number(document.f.display.value)+1)&quot;,1000);\n        }//定时器 每隔一秒加一次\n        /*function incre() {\n         document.f.display.value=String(Number(document.f.display.value)+1);\n\n         }*/\n\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=&quot;init()&quot;&gt;\n    &lt;form name=&quot;f&quot;&gt;&lt;!--不写form总报错 不知道为啥--&gt;\n        &lt;input name=&quot;display&quot; type=&quot;text&quot; value=&quot;0&quot;/&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>2.<a href=\"/item/game/tiaotiaoball/ball1\">用canvas插入img：</a></p>\n<pre><code class=\"bash\">&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;ball&lt;/title&gt;\n    &lt;script type=&quot;text/javascript&quot;&gt;\n    var img1=new Image();\n    var img2=new Image();\n    img1.src=&quot;../../images/cool.jpg&quot;;\n    img2.src=&quot;../../images/dog.gif&quot;;\n    var ctx;\n    function init(){\n        ctx=document.getElementById(&quot;canvas&quot;).getContext(&#39;2d&#39;);\n        ctx.drawImage(img1,10,20,50,50);\n        ctx.drawImage(img2,150,20,100,100);\n    }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=&quot;init();&quot;&gt;\n    &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;background-color: aqua;&quot;&gt;\n        your browser don&#39;t support convas\n    &lt;/canvas&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>3.<a href=\"/item/game/tiaotiaoball/ball\">跳跳球：</a></p>\n<pre><code class=\"bash\">&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;ball&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;script type=&quot;text/javascript&quot;&gt;\n    var boxx=50,boxy=50,boxw=300,boxh=300;//盒子左上角据左边画布的距离，盒子左上角据上边画布的距离，盒子的宽高；\n    var ballx=20,bally=20,ballvx=2,ballvy=4,ballr=6;//球的初始位置（相对盒子），球的位移，球的半径；\n    var hshang=boxy+ballr,hxia=boxh+boxy-ballr,hzuo=boxx+ballr,hyou=boxw+boxx-ballr;//里面的小盒子 用于检测碰撞；\n    var ctx;//保存上下文 不太懂上下文是啥\n    function init(){\n        ctx=document.getElementById(&quot;canvas&quot;).getContext(&#39;2d&#39;);//获取canvas的上下文\n        ctx.fillStyle=&quot;rgb(200.0.0)&quot;;//设置填充颜色\n        ctx.lineWidth=6; //设置线宽\n        moveball();//先显示ball\n        setInterval(moveball,10); //setTimeout()只执行一次事件 不能重复调用moveball事件；\n    }\n    function moveball() {\n        ctx.clearRect(boxx,boxy,boxw,boxh);//擦除整个盒子包括ball 第一次运行不会有任何影响\n        moveandcheck();\n        ctx.beginPath();\n        ctx.arc(ballx,bally,ballr,0,2*Math.PI,true);//画圆\n        ctx.fill();\n        ctx.strokeRect(boxx,boxy,boxw,boxh);//画盒子\n    }\n    function moveandcheck() {//检测碰撞\n        var perballx=ballx+ballvx,perbally=bally+ballvy;\n        if(perballx&gt;hyou) {//如果超过小盒子的右边\n            ballvx=-ballvx;//改变水平方向\n            perballx=hyou; //&quot;设置下一个x等于这个边界值&quot; 没看懂啥意思；\n        }\n        if(perballx&lt;hzuo) {\n            perballx=hzuo;\n            ballvx=-ballvx;\n        }\n        if(perbally&gt;hxia) {\n            perbally=hxia;\n            ballvy=-ballvy;\n        }\n        if(perbally&lt;hshang) {\n            perbally=hshang;\n            ballvy=-ballvy;\n        }\n        ballx=perballx;\n        bally=perbally;\n    }\n    function change() {\n        ballvx=Number(document.f.vx.value);\n        ballvy=Number(document.f.vy.value);\n    }//在form标签里调用onsubmit=&quot;return change();&quot;需要设置return false不然会整个刷新页面\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=&quot;init();&quot;&gt;\n    &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;background-color: aqua;&quot;&gt;\n        your browser don&#39;t support convas\n    &lt;/canvas&gt;\n    &lt;form name=&quot;f&quot; id=&quot;f&quot;&gt;\n        水平速度:&lt;input name=&quot;vx&quot; id=&quot;vx&quot; type=&quot;number&quot; value=&quot;2&quot;&gt;\n        垂直速度:&lt;input name=&quot;vy&quot; id=&quot;xy&quot; type=&quot;number&quot; value=&quot;4&quot;&gt;\n        &lt;input type=&quot;button&quot; value=&quot;change&quot; onclick=&quot;change()&quot;&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>附：<br>1.<a href=\"http://www.friendsofed.com/downloads.html\" target=\"_blank\" rel=\"noopener\">The Essential Guide to HTML5—using games to learn html5 and javascript</a></p>\n","more":"<p>这些天没什么事读了《HTML5游戏开发》这本书，做一下实例：<br><img src=\"/assets/blogimg/item_game_tiaotiaoball_ball.png\"><br>1.<a href=\"/item/game/tiaotiaoball/settime\">计时器：</a></p>\n<pre><code class=\"bash\">&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;!--解决中文乱码的问题--&gt;\n    &lt;script&gt;\n        function init() {\n            setInterval(&quot;document.f.display.value=String(Number(document.f.display.value)+1)&quot;,1000);\n        }//定时器 每隔一秒加一次\n        /*function incre() {\n         document.f.display.value=String(Number(document.f.display.value)+1);\n\n         }*/\n\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=&quot;init()&quot;&gt;\n    &lt;form name=&quot;f&quot;&gt;&lt;!--不写form总报错 不知道为啥--&gt;\n        &lt;input name=&quot;display&quot; type=&quot;text&quot; value=&quot;0&quot;/&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>2.<a href=\"/item/game/tiaotiaoball/ball1\">用canvas插入img：</a></p>\n<pre><code class=\"bash\">&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;ball&lt;/title&gt;\n    &lt;script type=&quot;text/javascript&quot;&gt;\n    var img1=new Image();\n    var img2=new Image();\n    img1.src=&quot;../../images/cool.jpg&quot;;\n    img2.src=&quot;../../images/dog.gif&quot;;\n    var ctx;\n    function init(){\n        ctx=document.getElementById(&quot;canvas&quot;).getContext(&#39;2d&#39;);\n        ctx.drawImage(img1,10,20,50,50);\n        ctx.drawImage(img2,150,20,100,100);\n    }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=&quot;init();&quot;&gt;\n    &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;background-color: aqua;&quot;&gt;\n        your browser don&#39;t support convas\n    &lt;/canvas&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>3.<a href=\"/item/game/tiaotiaoball/ball\">跳跳球：</a></p>\n<pre><code class=\"bash\">&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;ball&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;script type=&quot;text/javascript&quot;&gt;\n    var boxx=50,boxy=50,boxw=300,boxh=300;//盒子左上角据左边画布的距离，盒子左上角据上边画布的距离，盒子的宽高；\n    var ballx=20,bally=20,ballvx=2,ballvy=4,ballr=6;//球的初始位置（相对盒子），球的位移，球的半径；\n    var hshang=boxy+ballr,hxia=boxh+boxy-ballr,hzuo=boxx+ballr,hyou=boxw+boxx-ballr;//里面的小盒子 用于检测碰撞；\n    var ctx;//保存上下文 不太懂上下文是啥\n    function init(){\n        ctx=document.getElementById(&quot;canvas&quot;).getContext(&#39;2d&#39;);//获取canvas的上下文\n        ctx.fillStyle=&quot;rgb(200.0.0)&quot;;//设置填充颜色\n        ctx.lineWidth=6; //设置线宽\n        moveball();//先显示ball\n        setInterval(moveball,10); //setTimeout()只执行一次事件 不能重复调用moveball事件；\n    }\n    function moveball() {\n        ctx.clearRect(boxx,boxy,boxw,boxh);//擦除整个盒子包括ball 第一次运行不会有任何影响\n        moveandcheck();\n        ctx.beginPath();\n        ctx.arc(ballx,bally,ballr,0,2*Math.PI,true);//画圆\n        ctx.fill();\n        ctx.strokeRect(boxx,boxy,boxw,boxh);//画盒子\n    }\n    function moveandcheck() {//检测碰撞\n        var perballx=ballx+ballvx,perbally=bally+ballvy;\n        if(perballx&gt;hyou) {//如果超过小盒子的右边\n            ballvx=-ballvx;//改变水平方向\n            perballx=hyou; //&quot;设置下一个x等于这个边界值&quot; 没看懂啥意思；\n        }\n        if(perballx&lt;hzuo) {\n            perballx=hzuo;\n            ballvx=-ballvx;\n        }\n        if(perbally&gt;hxia) {\n            perbally=hxia;\n            ballvy=-ballvy;\n        }\n        if(perbally&lt;hshang) {\n            perbally=hshang;\n            ballvy=-ballvy;\n        }\n        ballx=perballx;\n        bally=perbally;\n    }\n    function change() {\n        ballvx=Number(document.f.vx.value);\n        ballvy=Number(document.f.vy.value);\n    }//在form标签里调用onsubmit=&quot;return change();&quot;需要设置return false不然会整个刷新页面\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=&quot;init();&quot;&gt;\n    &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;background-color: aqua;&quot;&gt;\n        your browser don&#39;t support convas\n    &lt;/canvas&gt;\n    &lt;form name=&quot;f&quot; id=&quot;f&quot;&gt;\n        水平速度:&lt;input name=&quot;vx&quot; id=&quot;vx&quot; type=&quot;number&quot; value=&quot;2&quot;&gt;\n        垂直速度:&lt;input name=&quot;vy&quot; id=&quot;xy&quot; type=&quot;number&quot; value=&quot;4&quot;&gt;\n        &lt;input type=&quot;button&quot; value=&quot;change&quot; onclick=&quot;change()&quot;&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\n<p>附：<br>1.<a href=\"http://www.friendsofed.com/downloads.html\" target=\"_blank\" rel=\"noopener\">The Essential Guide to HTML5—using games to learn html5 and javascript</a></p>\n","categories":[],"tags":[{"name":"JS","path":"api/tags/JS.json"},{"name":"H5","path":"api/tags/H5.json"},{"name":"canvas","path":"api/tags/canvas.json"}]}